# Researchopia - Zotero 学术标注共享插件

## 概述

Researchopia 是一个强大的 Zotero 插件，旨在实现学术论文标注的实时共享和协作。用户可以将自己的标注分享给其他研究者，同时查看和互动其他用户的标注，形成一个活跃的学术交流社区。

## 主要功能

### 🔐 用户认证系统
- **Supabase 集成**: 安全的用户注册、登录和会话管理
- **持久化登录**: 记住登录状态，无需重复登录
- **用户资料管理**: 个人信息和偏好设置

### 📝 智能标注处理
- **精细化提取**: 段落/句子级别的标注定位
- **上下文分析**: 智能识别标注的上下文信息
- **相似性匹配**: 基于内容的标注去重和匹配
- **批量处理**: 高效的批量标注上传和下载

### 🔄 实时同步机制
- **增量同步**: 只同步变更的标注，提高效率
- **冲突处理**: 智能处理同步冲突
- **离线支持**: 离线模式下的本地缓存
- **错误恢复**: 自动重试和错误处理

### 👥 社交功能
- **点赞系统**: 为优质标注点赞
- **评论互动**: 对标注进行评论和讨论
- **用户关注**: 关注感兴趣的研究者
- **内容分享**: 分享有价值的标注

### 🎨 丰富的用户界面
- **Item Pane 集成**: 在 Zotero 右侧面板显示共享标注
- **PDF 阅读器集成**: 在原生阅读器中实时显示标注
- **交互式覆盖层**: 悬停和点击交互
- **用户头像和统计**: 直观的用户信息展示

### ⚙️ 灵活的设置选项
- **显示偏好**: 自定义标注显示方式
- **社交设置**: 控制社交功能的启用
- **隐私控制**: 管理标注的可见性
- **性能优化**: 缓存和同步间隔设置

## 安装指南

### 前置要求
- Zotero 7.0 或更高版本
- 稳定的网络连接
- Supabase 账户（用于数据存储）

### 安装步骤
1. 下载最新版本的 `.xpi` 文件
2. 在 Zotero 中打开 `工具` > `插件`
3. 点击齿轮图标，选择 `从文件安装插件`
4. 选择下载的 `.xpi` 文件
5. 重启 Zotero

## 使用指南

### 首次设置
1. 安装插件后，打开 `编辑` > `首选项` > `Researchopia`
2. 在登录区域输入您的邮箱和密码
3. 如果没有账户，点击"注册新账户"
4. 登录成功后，插件将自动初始化

### 标注共享
1. 在 Zotero 中选择一篇有 DOI 的论文
2. 确保论文有标注（高亮、笔记等）
3. 在 Item Pane 的 Researchopia 标签页中点击"共享标注"
4. 标注将上传到云端，其他用户可以看到

### 查看共享标注
1. 选择任意有 DOI 的论文
2. 在 Item Pane 的 Researchopia 标签页中查看其他用户的标注
3. 可以对标注进行点赞、评论等操作
4. 在 PDF 阅读器中，共享标注会以覆盖层形式显示

### 社交互动
- **点赞**: 点击标注旁的👍按钮
- **评论**: 点击💬按钮添加评论
- **关注**: 点击用户名关注该研究者
- **分享**: 点击📤按钮分享标注

## 配置选项

### 功能设置
- `自动共享新标注`: 新建标注时自动上传
- `显示其他用户的共享标注`: 控制是否显示他人标注
- `在PDF阅读器中显示共享标注`: 阅读器集成开关
- `标注显示数量限制`: 控制显示的标注数量

### 社交功能
- `启用点赞功能`: 开启/关闭点赞系统
- `启用评论功能`: 开启/关闭评论系统
- `启用关注功能`: 开启/关闭用户关注
- `接收通知`: 控制通知推送

### 显示设置
- `标注排序方式`: 按点赞数、评论数、时间或相关性排序
- `标注透明度`: 调整覆盖层的透明度
- `显示用户头像`: 控制头像显示
- `紧凑模式`: 紧凑的界面布局

### 高级设置
- `同步间隔`: 自动同步的时间间隔
- `缓存大小`: 本地缓存的大小限制
- `调试模式`: 开启详细日志记录
- `离线模式`: 仅使用本地缓存

## 快捷键

- `Ctrl/Cmd + Shift + A`: 切换共享标注显示
- `Ctrl/Cmd + Shift + R`: 刷新共享标注

## 故障排除

### 常见问题

**Q: 无法登录怎么办？**
A: 检查网络连接，确认邮箱和密码正确。如果问题持续，尝试重置密码。

**Q: 标注没有显示怎么办？**
A: 确保论文有有效的 DOI，检查网络连接，尝试手动刷新。

**Q: 性能问题怎么解决？**
A: 减少标注显示数量，清除缓存，关闭不必要的功能。

**Q: 数据安全吗？**
A: 所有数据通过 HTTPS 加密传输，存储在安全的 Supabase 数据库中。

### 调试模式
1. 在偏好设置中启用"调试模式"
2. 重启 Zotero
3. 查看 Zotero 的错误控制台获取详细日志
4. 将日志信息提供给开发者

## 开发信息

### 技术栈
- **前端**: TypeScript, XUL, HTML/CSS
- **后端**: Supabase (PostgreSQL + REST API)
- **构建工具**: Webpack, ESLint, Prettier
- **测试**: Jest, 集成测试

### 项目结构
```
zotero-plugin/
├── src/
│   ├── modules/          # 核心模块
│   │   ├── auth.ts       # 认证管理
│   │   ├── annotation.ts # 标注处理
│   │   ├── sync.ts       # 同步机制
│   │   ├── ui.ts         # 用户界面
│   │   ├── reader.ts     # 阅读器集成
│   │   └── social.ts     # 社交功能
│   ├── utils/            # 工具函数
│   └── addon.ts          # 主入口
├── addon/
│   └── content/          # UI 文件
├── test/                 # 测试文件
└── build/                # 构建输出
```

### 贡献指南
1. Fork 项目仓库
2. 创建功能分支
3. 提交更改
4. 创建 Pull Request

## 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

## 联系方式

- **问题反馈**: [GitHub Issues](https://github.com/your-repo/issues)
- **功能建议**: [GitHub Discussions](https://github.com/your-repo/discussions)
- **邮箱**: your-email@example.com

## 更新日志

### v1.0.0 (2024-01-XX)
- 🎉 首次发布
- ✨ 完整的标注共享功能
- 🔐 Supabase 认证集成
- 👥 社交功能实现
- 📖 PDF 阅读器集成
- ⚙️ 丰富的配置选项

---

**感谢使用 Researchopia！让我们一起构建更好的学术交流社区。** 🚀
