# å­¦æœ¯äº’åŠ©é…å¯¹å¹³å°æ–¹æ¡ˆè®¾è®¡

## æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¶é—´**: 2025-01-07
- **çŠ¶æ€**: å¾…å®¡æ ¸
- **ä¼˜å…ˆçº§**: é«˜
- **å…³è”æ–‡æ¡£**: `2-DOI_FULLTEXT_RETRIEVAL_RESEARCH.md`

---

## 1. æ ¸å¿ƒç†å¿µ

### 1.1 å®šä½
**"æ’®åˆä¸­ä»‹"è€Œé"æ–‡ä»¶æ‰˜ç®¡å¹³å°"**

```
å¹³å°èŒè´£ = è¿æ¥è®¢é˜…ç”¨æˆ·ä¸éè®¢é˜…ç”¨æˆ· + æä¾›é€šä¿¡æ¸ é“
å¹³å°NOT = å­˜å‚¨PDF + åˆ†å‘PDF
```

### 1.2 æ ¸å¿ƒæœºåˆ¶
```mermaid
graph LR
    A[éè®¢é˜…ç”¨æˆ·] -->|å‘èµ·è¯·æ±‚| B[å¹³å°æ™ºèƒ½åŒ¹é…]
    B -->|æœºæ„é‚®ç®±è¯†åˆ«| C[è®¢é˜…ç”¨æˆ·]
    C -->|æ¥å—å¸®åŠ©| D[ç›´æ¥ä¼ è¾“PDF]
    D -->|ç§ä¿¡/é‚®ä»¶| A
    style B fill:#f9f,stroke:#333
    style D fill:#9f9,stroke:#333
```

**å…³é”®ç‰¹å¾**ï¼š
- ğŸ¯ **ç²¾å‡†åŒ¹é…**ï¼šé€šè¿‡æœºæ„é‚®ç®±è‡ªåŠ¨è¯†åˆ«è®¢é˜…ç”¨æˆ·
- ğŸ¤ **ç”¨æˆ·è‡ªä¸»**ï¼šå¿—æ„¿è€…è‡ªæ„¿é€‰æ‹©æ˜¯å¦å¸®åŠ©ï¼Œå¹³å°ä¸å¼ºåˆ¶
- ğŸ”’ **éšç§ä¿æŠ¤**ï¼šåŒæ–¹èº«ä»½åŒ¿åï¼Œä»…é€šè¿‡å¹³å°é€šé“é€šä¿¡
- â±ï¸ **ä¸´æ—¶å­˜å‚¨**ï¼šå¦‚ä½¿ç”¨å¹³å°ä¼ è¾“ï¼Œæ–‡ä»¶24å°æ—¶åè‡ªåŠ¨åˆ é™¤
- âœ… **æ³•å¾‹éš”ç¦»**ï¼šæ–‡ä»¶ä¼ è¾“å‘ç”Ÿåœ¨ç”¨æˆ·é—´ï¼Œå¹³å°ä¸æ‰˜ç®¡ã€ä¸å…¬å¼€åˆ†å‘

### 1.3 ğŸ“‹ å®Œæ•´ç”¨æˆ·æµç¨‹

**éè®¢é˜…ç”¨æˆ·ï¼ˆè¯·æ±‚è€…ï¼‰**

```
1. åœ¨Zoteroæ’ä»¶ç‚¹å‡»"è¯·æ±‚å…¨æ–‡"
   â†“
2. å¡«å†™ç®€çŸ­è¯´æ˜ï¼ˆå¯é€‰ï¼‰ï¼š"éœ€è¦ç”¨äºè¯¾ç¨‹è®ºæ–‡å†™ä½œ"
   â†“
3. ç³»ç»Ÿè‡ªåŠ¨åŒ¹é…æœ‰è®¢é˜…çš„ç”¨æˆ·
   â†“
4. ç­‰å¾…é€šçŸ¥ï¼ˆé¢„è®¡15åˆ†é’Ÿå†…ï¼‰
   â†“
5. æ”¶åˆ°é€šçŸ¥ï¼š"æœ‰å¿—æ„¿è€…æ„¿æ„å¸®åŠ©ï¼"
   â†“
6. é€‰æ‹©æ¥æ”¶æ–¹å¼ï¼š
   - é€šè¿‡å¹³å°ç§ä¿¡ï¼ˆè‡ªåŠ¨ä¸‹è½½åˆ°Zoteroï¼‰
   - é€šè¿‡ä¸´æ—¶é‚®ç®±ï¼ˆç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ temp_12345@researchopia.comï¼‰
   â†“
7. æ”¶åˆ°PDFï¼Œè‡ªåŠ¨é™„åŠ åˆ°Zoteroæ¡ç›®
   â†“
8. ï¼ˆå¯é€‰ï¼‰ç»™å¿—æ„¿è€…å¥½è¯„ + æ„Ÿè°¢ç•™è¨€
```

**è®¢é˜…ç”¨æˆ·ï¼ˆå¿—æ„¿è€…ï¼‰**

```
1. æ”¶åˆ°é€šçŸ¥ï¼š"æœ‰ç”¨æˆ·éœ€è¦å¸®åŠ©"
   â†“
2. æŸ¥çœ‹è®ºæ–‡ä¿¡æ¯ï¼ˆåŒ¿åè¯·æ±‚ï¼‰
   â†“
3. ç¡®è®¤"æˆ‘æ„¿æ„å¸®åŠ©"
   â†“
4. ç³»ç»Ÿå¼•å¯¼ï¼š
   - "è¯·ç¡®è®¤æ‚¨é€šè¿‡åˆæ³•é€”å¾„ï¼ˆä¸ªäººè®¢é˜…/OAï¼‰è·å–æ­¤æ–‡çŒ®"
   - "è¯·å‹¿ä½¿ç”¨æœºæ„è®¢é˜…æ‰¹é‡ä¸‹è½½"
   â†“
5. ä¸Šä¼ PDFæˆ–æä¾›ä¸‹è½½é“¾æ¥
   â†“
6. ç³»ç»Ÿè‡ªåŠ¨é€šçŸ¥è¯·æ±‚è€…
   â†“
7. è·å¾—ç§¯åˆ†å¥–åŠ± + å¿—æ„¿è€…å¾½ç« 
```

### 1.4 ğŸ›¡ï¸ å¢å¼ºåˆè§„æªæ–½

**æ˜ç¡®ç”¨æˆ·åè®®**

```
### å¿—æ„¿è€…å£°æ˜ï¼ˆå¿…é¡»å‹¾é€‰æ‰èƒ½ä¸Šä¼ ï¼‰
â–¡ æˆ‘ç¡®è®¤æ­¤æ–‡çŒ®æ¥è‡ªä»¥ä¸‹åˆæ³•é€”å¾„ä¹‹ä¸€ï¼š
  - å¼€æ”¾è·å–ï¼ˆOpen Accessï¼‰èµ„æº
  - æˆ‘çš„ä¸ªäººè®¢é˜…è´¦å·
  - ä½œè€…æœ¬äººæˆæƒåˆ†äº«
  - å…¶ä»–åˆæ³•å…¬å¼€æ¸ é“

â–¡ æˆ‘ç†è§£ä¸å¾—ä½¿ç”¨æœºæ„è®¢é˜…è´¦å·ç³»ç»Ÿæ€§ä¸‹è½½å¹¶åˆ†å‘è®ºæ–‡

â–¡ æˆ‘åŒæ„å¯¹ä¸Šä¼ å†…å®¹çš„åˆæ³•æ€§è´Ÿè´£
```

**æŠ€æœ¯é™åˆ¶**

- æ¯ä¸ªç”¨æˆ·æ¯å¤©æœ€å¤šå¸®åŠ©5æ¬¡ï¼ˆé˜²æ­¢æˆä¸º"æ–‡çŒ®æ‰¹å‘å•†"ï¼‰
- åŒä¸€DOIçš„è¯·æ±‚é—´éš”è‡³å°‘24å°æ—¶ï¼ˆé˜²æ­¢æ»¥ç”¨ï¼‰
- é«˜é£é™©å‡ºç‰ˆå•†ï¼ˆNatureã€Scienceï¼‰éœ€é¢å¤–ç¡®è®¤


---

## 2. æŠ€æœ¯æ¶æ„è®¾è®¡

### 2.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å‰ç«¯å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Zoteroæ’ä»¶   â”‚  â”‚  Webç½‘ç«™     â”‚               â”‚
â”‚  â”‚ (è¯·æ±‚å…¨æ–‡)   â”‚  â”‚ (äº’åŠ©ç¤¾åŒº)   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  APIå±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ è¯·æ±‚ç®¡ç†API  â”‚  â”‚  åŒ¹é…å¼•æ“API â”‚               â”‚
â”‚  â”‚ /api/request â”‚  â”‚ /api/matcher â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ é€šçŸ¥ç³»ç»ŸAPI  â”‚  â”‚  æ–‡ä»¶ä¼ è¾“API â”‚               â”‚
â”‚  â”‚ /api/notify  â”‚  â”‚ /api/transferâ”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä¸šåŠ¡é€»è¾‘å±‚                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ æœºæ„éªŒè¯     â”‚  â”‚  æ™ºèƒ½é…å¯¹     â”‚               â”‚
â”‚  â”‚ é‚®ç®±è¯†åˆ«     â”‚  â”‚  ä¼˜å…ˆçº§æ’åº   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ é£é™©è¯„ä¼°     â”‚  â”‚  ç§¯åˆ†ç³»ç»Ÿ     â”‚               â”‚
â”‚  â”‚ æ»¥ç”¨æ£€æµ‹     â”‚  â”‚  ä¿¡èª‰ç®¡ç†     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ•°æ®å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚  Redis       â”‚               â”‚
â”‚  â”‚ (ç”¨æˆ·ã€è¯·æ±‚) â”‚  â”‚ (ç¼“å­˜ã€é˜Ÿåˆ—) â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ S3/OSS       â”‚  â”‚  WebSocket   â”‚               â”‚
â”‚  â”‚ (ä¸´æ—¶æ–‡ä»¶)   â”‚  â”‚ (å®æ—¶é€šçŸ¥)   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®åº“è®¾è®¡

#### 2.2.1 æ ¸å¿ƒè¡¨ç»“æ„

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  username VARCHAR(100),
  
  -- æœºæ„ä¿¡æ¯
  institution_id UUID REFERENCES institutions(id),
  is_verified BOOLEAN DEFAULT FALSE, -- æ˜¯å¦é€šè¿‡æœºæ„é‚®ç®±éªŒè¯
  verification_date TIMESTAMP,
  
  -- è®¢é˜…ä¿¡æ¯ï¼ˆç”¨æˆ·è‡ªè¡Œå£°æ˜ï¼‰
  subscriptions JSONB, -- ['Springer', 'Elsevier', 'Wiley']
  
  -- äº’åŠ©ç»Ÿè®¡
  help_provided_count INTEGER DEFAULT 0, -- å¸®åŠ©ä»–äººæ¬¡æ•°
  help_received_count INTEGER DEFAULT 0, -- è¢«å¸®åŠ©æ¬¡æ•°
  reputation_score DECIMAL(3,2) DEFAULT 0.0, -- 0.00 - 5.00
  
  -- çŠ¶æ€æ§åˆ¶
  is_available BOOLEAN DEFAULT TRUE, -- æ˜¯å¦æ„¿æ„æ¥å—å¸®åŠ©è¯·æ±‚
  last_help_time TIMESTAMP, -- ä¸Šæ¬¡å¸®åŠ©æ—¶é—´ï¼ˆé˜²è¿‡è½½ï¼‰
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- æœºæ„è¡¨
CREATE TABLE institutions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  country VARCHAR(100),
  
  -- é‚®ç®±åŸŸå
  email_domains TEXT[], -- ['mit.edu', 'csail.mit.edu']
  
  -- è®¢é˜…ä¿¡æ¯ï¼ˆæœºæ„çº§åˆ«ï¼‰
  known_subscriptions JSONB, -- {'publishers': ['Springer', 'Nature']}
  
  -- ç»Ÿè®¡ä¿¡æ¯
  member_count INTEGER DEFAULT 0,
  total_helps INTEGER DEFAULT 0,
  
  created_at TIMESTAMP DEFAULT NOW()
);

-- è®ºæ–‡è¯·æ±‚è¡¨
CREATE TABLE paper_requests (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- è®ºæ–‡ä¿¡æ¯
  doi VARCHAR(255) NOT NULL,
  title TEXT,
  publisher VARCHAR(100),
  
  -- è¯·æ±‚è€…ä¿¡æ¯
  requester_id UUID REFERENCES users(id) NOT NULL,
  reason TEXT, -- å¯é€‰ï¼šè¯·æ±‚ç†ç”±
  
  -- çŠ¶æ€ç®¡ç†
  status VARCHAR(20) DEFAULT 'pending', -- pending, matched, completed, cancelled
  
  -- åŒ¹é…ä¿¡æ¯
  helper_id UUID REFERENCES users(id),
  matched_at TIMESTAMP,
  completed_at TIMESTAMP,
  
  -- ä¼ è¾“ä¿¡æ¯
  transfer_method VARCHAR(20), -- 'platform', 'email', 'external'
  file_url TEXT, -- ä¸´æ—¶ä¸‹è½½é“¾æ¥ï¼ˆ24å°æ—¶æœ‰æ•ˆï¼‰
  file_expires_at TIMESTAMP,
  
  -- è¯„ä»·ä¿¡æ¯
  rating INTEGER, -- 1-5æ˜Ÿ
  feedback TEXT,
  
  -- é£é™©è¯„ä¼°
  risk_level VARCHAR(10), -- LOW, MEDIUM, HIGH
  flagged BOOLEAN DEFAULT FALSE,
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ç§ä¿¡é€šé“è¡¨ï¼ˆåŒ¿åé€šä¿¡ï¼‰
CREATE TABLE private_channels (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  request_id UUID REFERENCES paper_requests(id) NOT NULL,
  
  -- åŒæ–¹åŒ¿åæ ‡è¯†
  requester_alias VARCHAR(50), -- 'User_A1B2C3'
  helper_alias VARCHAR(50), -- 'Helper_X9Y8Z7'
  
  -- ä¸´æ—¶é‚®ç®±ï¼ˆå¯é€‰ï¼‰
  temp_email VARCHAR(255), -- 'temp_12345@researchopia.com'
  
  -- çŠ¶æ€
  is_active BOOLEAN DEFAULT TRUE,
  expires_at TIMESTAMP, -- ä»»åŠ¡å®Œæˆå24å°æ—¶è¿‡æœŸ
  
  created_at TIMESTAMP DEFAULT NOW()
);

-- æ¶ˆæ¯è¡¨ï¼ˆç§ä¿¡å†…å®¹ï¼‰
CREATE TABLE channel_messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  channel_id UUID REFERENCES private_channels(id) NOT NULL,
  
  sender_type VARCHAR(10), -- 'requester' or 'helper'
  message_text TEXT,
  attachment_url TEXT, -- PDFé“¾æ¥ï¼ˆä¸´æ—¶å­˜å‚¨ï¼‰
  
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);

-- æ“ä½œæ—¥å¿—ï¼ˆå®¡è®¡ç”¨ï¼‰
CREATE TABLE audit_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  action VARCHAR(50), -- 'request_created', 'help_provided', 'file_uploaded'
  details JSONB,
  ip_address INET,
  user_agent TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 2.2.2 ç´¢å¼•ä¼˜åŒ–

```sql
-- å¿«é€ŸæŸ¥æ‰¾å¯ç”¨å¿—æ„¿è€…
CREATE INDEX idx_users_available ON users(is_verified, is_available, last_help_time)
  WHERE is_verified = TRUE AND is_available = TRUE;

-- æŒ‰æœºæ„èšåˆç»Ÿè®¡
CREATE INDEX idx_users_institution ON users(institution_id);

-- å¿«é€ŸæŸ¥æ‰¾å¾…åŒ¹é…è¯·æ±‚
CREATE INDEX idx_requests_pending ON paper_requests(status, created_at)
  WHERE status = 'pending';

-- DOIå»é‡æ£€æŸ¥
CREATE INDEX idx_requests_doi ON paper_requests(doi, requester_id, created_at);
```

---

## 3. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 3.1 æœºæ„éªŒè¯æ¨¡å—

```typescript
// src/lib/institutional-verification.ts
import { supabase } from './supabase';

export class InstitutionalVerification {
  /**
   * æ£€æµ‹é‚®ç®±åŸŸåæ˜¯å¦å±äºå­¦æœ¯æœºæ„
   */
  async detectInstitution(email: string): Promise<Institution | null> {
    const domain = email.split('@')[1];
    
    // æŸ¥è¯¢æœºæ„è¡¨
    const { data: institution } = await supabase
      .from('institutions')
      .select('*')
      .contains('email_domains', [domain])
      .single();
    
    return institution;
  }
  
  /**
   * å‘é€éªŒè¯é‚®ä»¶
   */
  async sendVerificationEmail(userId: string, email: string): Promise<string> {
    const verificationCode = this.generateCode();
    
    // å­˜å‚¨éªŒè¯ç ï¼ˆRedisï¼Œ10åˆ†é’Ÿæœ‰æ•ˆï¼‰
    await redis.setex(
      `verification:${userId}`,
      600,
      verificationCode
    );
    
    // å‘é€é‚®ä»¶
    await sendEmail({
      to: email,
      subject: 'Researchopia æœºæ„é‚®ç®±éªŒè¯',
      template: 'verification',
      data: {
        code: verificationCode,
        expires_in: '10åˆ†é’Ÿ'
      }
    });
    
    return verificationCode;
  }
  
  /**
   * éªŒè¯ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç 
   */
  async verifyCode(userId: string, inputCode: string): Promise<boolean> {
    const storedCode = await redis.get(`verification:${userId}`);
    
    if (storedCode === inputCode) {
      // æ›´æ–°ç”¨æˆ·éªŒè¯çŠ¶æ€
      await supabase
        .from('users')
        .update({
          is_verified: true,
          verification_date: new Date()
        })
        .eq('id', userId);
      
      // åˆ é™¤éªŒè¯ç 
      await redis.del(`verification:${userId}`);
      
      return true;
    }
    
    return false;
  }
  
  /**
   * ç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç 
   */
  private generateCode(): string {
    return Math.floor(100000 + Math.random() * 900000).toString();
  }
}
```

### 3.2 æ™ºèƒ½é…å¯¹æ¨¡å—

```typescript
// src/lib/request-matcher.ts
import { supabase } from './supabase';

export class RequestMatcher {
  /**
   * ä¸ºè¯·æ±‚åŒ¹é…åˆé€‚çš„å¿—æ„¿è€…
   */
  async matchRequest(requestId: string): Promise<User[]> {
    // 1. è·å–è¯·æ±‚è¯¦æƒ…
    const { data: request } = await supabase
      .from('paper_requests')
      .select('*, requester:users(*)')
      .eq('id', requestId)
      .single();
    
    if (!request) throw new Error('Request not found');
    
    // 2. æ£€æµ‹å‡ºç‰ˆå•†
    const publisher = await this.detectPublisher(request.doi);
    
    // 3. æŸ¥æ‰¾æœ‰è¯¥å‡ºç‰ˆå•†è®¢é˜…çš„ç”¨æˆ·
    const { data: eligibleUsers } = await supabase
      .from('users')
      .select('*')
      .eq('is_verified', true)
      .eq('is_available', true)
      .contains('subscriptions', [publisher])
      .neq('id', request.requester_id) // æ’é™¤è¯·æ±‚è€…è‡ªå·±
      .order('help_provided_count', { ascending: true }) // ä¼˜å…ˆå¸®åŠ©æ¬¡æ•°å°‘çš„
      .limit(10);
    
    // 4. è¿‡æ»¤æœ€è¿‘å¸®åŠ©è¿‡çš„ç”¨æˆ·ï¼ˆ30åˆ†é’Ÿå†·å´æœŸï¼‰
    const now = Date.now();
    const availableUsers = eligibleUsers?.filter(user => {
      if (!user.last_help_time) return true;
      const cooldown = 30 * 60 * 1000; // 30åˆ†é’Ÿ
      return now - new Date(user.last_help_time).getTime() > cooldown;
    }) || [];
    
    return availableUsers;
  }
  
  /**
   * é€šçŸ¥åŒ¹é…çš„å¿—æ„¿è€…
   */
  async notifyVolunteers(request: PaperRequest, users: User[]): Promise<void> {
    const notifications = users.map(user => ({
      user_id: user.id,
      type: 'help_request',
      title: 'æœ‰ç”¨æˆ·éœ€è¦æ‚¨çš„å¸®åŠ©',
      message: `æœ‰ç”¨æˆ·éœ€è¦è·å–è®ºæ–‡ï¼š\nã€Š${request.title}ã€‹\nDOI: ${request.doi}`,
      action_url: `/help/request/${request.id}`,
      created_at: new Date()
    }));
    
    // æ‰¹é‡æ’å…¥é€šçŸ¥
    await supabase.from('notifications').insert(notifications);
    
    // WebSocketå®æ—¶æ¨é€
    users.forEach(user => {
      websocket.send(user.id, {
        type: 'new_help_request',
        request_id: request.id,
        doi: request.doi,
        title: request.title
      });
    });
  }
  
  /**
   * æ£€æµ‹DOIæ‰€å±å‡ºç‰ˆå•†
   */
  private async detectPublisher(doi: string): Promise<string> {
    // é€šè¿‡Crossref APIæ£€æµ‹
    const response = await fetch(
      `https://api.crossref.org/works/${doi}`
    );
    const data = await response.json();
    
    return data.message.publisher || 'Unknown';
  }
}
```

### 3.3 é£é™©è¯„ä¼°æ¨¡å—

```typescript
// src/lib/risk-assessment.ts
export class RiskAssessment {
  /**
   * è¯„ä¼°è¯·æ±‚çš„é£é™©ç­‰çº§
   */
  async assessRequest(requestId: string): Promise<RiskLevel> {
    const { data: request } = await supabase
      .from('paper_requests')
      .select('*, requester:users(*)')
      .eq('id', requestId)
      .single();
    
    let riskScore = 0;
    const reasons: string[] = [];
    
    // 1. å‡ºç‰ˆå•†é£é™©
    const publisher = await detectPublisher(request.doi);
    const highRiskPublishers = ['Nature', 'Science', 'Cell', 'Lancet'];
    if (highRiskPublishers.includes(publisher)) {
      riskScore += 3;
      reasons.push(`é«˜é£é™©å‡ºç‰ˆå•†: ${publisher}`);
    }
    
    // 2. ç”¨æˆ·å†å²
    const user = request.requester;
    if (user.help_received_count > 10 && user.reputation_score < 3.0) {
      riskScore += 2;
      reasons.push('ç”¨æˆ·è¯„åˆ†ä½ä½†è¯·æ±‚é¢‘ç¹');
    }
    
    // 3. è¯·æ±‚é¢‘ç‡ï¼ˆ7å¤©å†…ï¼‰
    const sevenDaysAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);
    const { count: recentCount } = await supabase
      .from('paper_requests')
      .select('*', { count: 'exact', head: true })
      .eq('requester_id', user.id)
      .gte('created_at', sevenDaysAgo.toISOString());
    
    if (recentCount && recentCount > 15) {
      riskScore += 5;
      reasons.push(`7å¤©å†…è¯·æ±‚${recentCount}æ¬¡`);
    }
    
    // 4. åŒä¸€DOIé‡å¤è¯·æ±‚
    const { count: sameDoiCount } = await supabase
      .from('paper_requests')
      .select('*', { count: 'exact', head: true })
      .eq('requester_id', user.id)
      .eq('doi', request.doi);
    
    if (sameDoiCount && sameDoiCount > 1) {
      riskScore += 2;
      reasons.push('åŒä¸€DOIé‡å¤è¯·æ±‚');
    }
    
    // è®¡ç®—é£é™©ç­‰çº§
    let level: RiskLevel;
    if (riskScore >= 7) {
      level = 'HIGH';
    } else if (riskScore >= 4) {
      level = 'MEDIUM';
    } else {
      level = 'LOW';
    }
    
    // æ›´æ–°è¯·æ±‚é£é™©ç­‰çº§
    await supabase
      .from('paper_requests')
      .update({
        risk_level: level,
        flagged: level === 'HIGH'
      })
      .eq('id', requestId);
    
    // è®°å½•è¯„ä¼°æ—¥å¿—
    await logRiskAssessment({
      request_id: requestId,
      risk_score: riskScore,
      risk_level: level,
      reasons: reasons
    });
    
    return level;
  }
}

type RiskLevel = 'LOW' | 'MEDIUM' | 'HIGH';
```

### 3.4 æ–‡ä»¶ä¼ è¾“æ¨¡å—

```typescript
// src/lib/file-transfer.ts
import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3';

export class FileTransfer {
  private s3Client: S3Client;
  
  constructor() {
    this.s3Client = new S3Client({
      region: process.env.AWS_REGION,
      credentials: {
        accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
        secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!
      }
    });
  }
  
  /**
   * ä¸Šä¼ PDFåˆ°ä¸´æ—¶å­˜å‚¨ï¼ˆ24å°æ—¶æœ‰æ•ˆï¼‰
   */
  async uploadTemporaryFile(
    file: File,
    requestId: string
  ): Promise<TemporaryFileResult> {
    // 1. ç«¯åˆ°ç«¯åŠ å¯†
    const encryptedBuffer = await this.encryptFile(file);
    
    // 2. ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å
    const fileName = `temp/${requestId}/${Date.now()}_${file.name}`;
    
    // 3. ä¸Šä¼ åˆ°S3ï¼ˆè®¾ç½®24å°æ—¶è¿‡æœŸï¼‰
    await this.s3Client.send(new PutObjectCommand({
      Bucket: process.env.AWS_S3_BUCKET,
      Key: fileName,
      Body: encryptedBuffer,
      ContentType: 'application/pdf',
      Metadata: {
        'request-id': requestId,
        'uploaded-at': new Date().toISOString()
      },
      // 24å°æ—¶åè‡ªåŠ¨åˆ é™¤
      Expires: new Date(Date.now() + 24 * 60 * 60 * 1000)
    }));
    
    // 4. ç”Ÿæˆä¸€æ¬¡æ€§ä¸‹è½½é“¾æ¥
    const downloadLink = await this.generateOneTimeLink({
      fileName,
      requestId,
      expiresIn: 24 * 60 * 60 * 1000
    });
    
    // 5. æ›´æ–°è¯·æ±‚è®°å½•
    await supabase
      .from('paper_requests')
      .update({
        file_url: downloadLink,
        file_expires_at: new Date(Date.now() + 24 * 60 * 60 * 1000),
        transfer_method: 'platform'
      })
      .eq('id', requestId);
    
    return {
      downloadLink,
      expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000)
    };
  }
  
  /**
   * ç”Ÿæˆä¸€æ¬¡æ€§ä¸‹è½½é“¾æ¥ï¼ˆåªèƒ½ä¸‹è½½ä¸€æ¬¡ï¼‰
   */
  private async generateOneTimeLink(params: {
    fileName: string;
    requestId: string;
    expiresIn: number;
  }): Promise<string> {
    // ç”Ÿæˆå”¯ä¸€token
    const token = crypto.randomUUID();
    
    // å­˜å‚¨tokenï¼ˆRedisï¼‰
    await redis.setex(
      `download:${token}`,
      params.expiresIn / 1000, // è½¬ä¸ºç§’
      JSON.stringify({
        file_name: params.fileName,
        request_id: params.requestId,
        downloaded: false
      })
    );
    
    // è¿”å›å¸¦tokençš„ä¸‹è½½é“¾æ¥
    return `${process.env.WEB_URL}/api/download/${token}`;
  }
  
  /**
   * å¤„ç†ä¸‹è½½è¯·æ±‚ï¼ˆéªŒè¯ä¸€æ¬¡æ€§tokenï¼‰
   */
  async handleDownload(token: string, userId: string): Promise<FileStream> {
    // 1. éªŒè¯token
    const dataStr = await redis.get(`download:${token}`);
    if (!dataStr) {
      throw new Error('ä¸‹è½½é“¾æ¥å·²è¿‡æœŸæˆ–æ— æ•ˆ');
    }
    
    const data = JSON.parse(dataStr);
    
    // 2. æ£€æŸ¥æ˜¯å¦å·²ä¸‹è½½
    if (data.downloaded) {
      throw new Error('æ­¤é“¾æ¥å·²è¢«ä½¿ç”¨ï¼Œä¸èƒ½é‡å¤ä¸‹è½½');
    }
    
    // 3. éªŒè¯ç”¨æˆ·æƒé™
    const { data: request } = await supabase
      .from('paper_requests')
      .select('requester_id')
      .eq('id', data.request_id)
      .single();
    
    if (request.requester_id !== userId) {
      throw new Error('æ— æƒä¸‹è½½æ­¤æ–‡ä»¶');
    }
    
    // 4. æ ‡è®°ä¸ºå·²ä¸‹è½½
    await redis.set(
      `download:${token}`,
      JSON.stringify({ ...data, downloaded: true })
    );
    
    // 5. ä»S3è·å–æ–‡ä»¶æµ
    const fileStream = await this.getFileStream(data.file_name);
    
    // 6. è§£å¯†
    const decryptedStream = await this.decryptFileStream(fileStream);
    
    // 7. è®°å½•ä¸‹è½½æ—¥å¿—
    await logDownload({
      request_id: data.request_id,
      user_id: userId,
      file_name: data.file_name
    });
    
    return decryptedStream;
  }
  
  /**
   * åŠ å¯†æ–‡ä»¶ï¼ˆAES-256-GCMï¼‰
   */
  private async encryptFile(file: File): Promise<Buffer> {
    const key = Buffer.from(process.env.ENCRYPTION_KEY!, 'hex');
    const iv = crypto.randomBytes(16);
    
    const cipher = crypto.createCipheriv('aes-256-gcm', key, iv);
    const buffer = await file.arrayBuffer();
    
    const encrypted = Buffer.concat([
      cipher.update(Buffer.from(buffer)),
      cipher.final()
    ]);
    
    const authTag = cipher.getAuthTag();
    
    // è¿”å›: IV + AuthTag + EncryptedData
    return Buffer.concat([iv, authTag, encrypted]);
  }
  
  /**
   * è§£å¯†æ–‡ä»¶æµ
   */
  private async decryptFileStream(encryptedStream: Stream): Promise<Stream> {
    // å®ç°è§£å¯†é€»è¾‘
    // ...
  }
}

interface TemporaryFileResult {
  downloadLink: string;
  expiresAt: Date;
}
```

---

## 4. ç”¨æˆ·äº¤äº’æµç¨‹

### 4.1 è¯·æ±‚è€…æµç¨‹

#### 4.1.1 Zoteroæ’ä»¶ç•Œé¢
```typescript
// zotero-plugin/src/modules/ui/fulltextRequestView.ts
export class FulltextRequestView {
  async showRequestDialog(doi: string, title: string): Promise<void> {
    const dialog = createDialog({
      title: 'è¯·æ±‚è®ºæ–‡å…¨æ–‡',
      width: 500,
      height: 400
    });
    
    dialog.innerHTML = `
      <div class="request-form">
        <div class="paper-info">
          <h3>${title}</h3>
          <p class="doi">DOI: ${doi}</p>
        </div>
        
        <div class="form-group">
          <label>è¯·æ±‚ç†ç”±ï¼ˆå¯é€‰ï¼‰</label>
          <textarea 
            id="reason" 
            placeholder="ä¾‹å¦‚ï¼šéœ€è¦ç”¨äºè¯¾ç¨‹è®ºæ–‡å†™ä½œ"
            rows="3"
          ></textarea>
          <small>æä¾›ç†ç”±å¯ä»¥æé«˜å¿—æ„¿è€…å“åº”ç‡</small>
        </div>
        
        <div class="estimated-time">
          â±ï¸ é¢„è®¡ç­‰å¾…æ—¶é—´ï¼š15åˆ†é’Ÿå†…
        </div>
        
        <div class="actions">
          <button id="submit-btn" class="primary">å‘é€è¯·æ±‚</button>
          <button id="cancel-btn">å–æ¶ˆ</button>
        </div>
      </div>
    `;
    
    // ç»‘å®šäº‹ä»¶
    document.getElementById('submit-btn')?.addEventListener('click', async () => {
      const reason = (document.getElementById('reason') as HTMLTextAreaElement).value;
      await this.submitRequest(doi, title, reason);
      dialog.close();
    });
    
    document.getElementById('cancel-btn')?.addEventListener('click', () => {
      dialog.close();
    });
    
    dialog.open();
  }
  
  async submitRequest(doi: string, title: string, reason?: string): Promise<void> {
    try {
      // 1. è°ƒç”¨APIåˆ›å»ºè¯·æ±‚
      const response = await apiClient.post('/api/requests/create', {
        doi,
        title,
        reason
      });
      
      const request = response.data;
      
      // 2. æ˜¾ç¤ºæˆåŠŸæç¤º
      UIManager.showSuccess(
        `è¯·æ±‚å·²å‘é€ï¼\né¢„è®¡15åˆ†é’Ÿå†…ä¼šæœ‰å¿—æ„¿è€…å“åº”\næ‚¨å¯ä»¥åœ¨ç½‘ç«™æŸ¥çœ‹è¿›åº¦`
      );
      
      // 3. å¼€å¯è½®è¯¢æ£€æŸ¥çŠ¶æ€
      this.startPollingStatus(request.id);
      
    } catch (error) {
      logger.error('Failed to create request:', error);
      UIManager.showError('è¯·æ±‚å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
    }
  }
  
  /**
   * è½®è¯¢è¯·æ±‚çŠ¶æ€ï¼ˆæ¯30ç§’æ£€æŸ¥ä¸€æ¬¡ï¼‰
   */
  private startPollingStatus(requestId: string): void {
    const pollInterval = setInterval(async () => {
      try {
        const response = await apiClient.get(`/api/requests/${requestId}/status`);
        const request = response.data;
        
        if (request.status === 'matched') {
          clearInterval(pollInterval);
          UIManager.showNotification({
            title: 'æœ‰å¿—æ„¿è€…æ„¿æ„å¸®åŠ©ï¼',
            message: `è¯·å‰å¾€ç½‘ç«™æŸ¥çœ‹è¯¦æƒ…`,
            action: () => {
              Zotero.launchURL(`${config.webUrl}/help/request/${requestId}`);
            }
          });
        } else if (request.status === 'completed') {
          clearInterval(pollInterval);
          await this.handleFileReady(request);
        }
      } catch (error) {
        logger.error('Failed to poll status:', error);
        clearInterval(pollInterval);
      }
    }, 30000); // 30ç§’
    
    // 2å°æ—¶ååœæ­¢è½®è¯¢
    setTimeout(() => clearInterval(pollInterval), 2 * 60 * 60 * 1000);
  }
  
  /**
   * æ–‡ä»¶å°±ç»ªï¼Œè‡ªåŠ¨ä¸‹è½½å¹¶é™„åŠ åˆ°Zotero
   */
  private async handleFileReady(request: PaperRequest): Promise<void> {
    try {
      // 1. ä»ä¸´æ—¶é“¾æ¥ä¸‹è½½PDF
      const pdfBlob = await fetch(request.file_url).then(r => r.blob());
      
      // 2. æ‰¾åˆ°å¯¹åº”çš„Zoteroæ¡ç›®
      const item = await findItemByDOI(request.doi);
      if (!item) throw new Error('Item not found');
      
      // 3. é™„åŠ PDFåˆ°æ¡ç›®
      const tempFile = await saveTempFile(pdfBlob, 'fulltext.pdf');
      await Zotero.Attachments.importFromFile({
        file: tempFile,
        parentItemID: item.id,
        title: 'Full Text PDF'
      });
      
      // 4. æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
      UIManager.showSuccess(
        `è®ºæ–‡å…¨æ–‡å·²è‡ªåŠ¨ä¸‹è½½å¹¶é™„åŠ åˆ°æ–‡çŒ®ï¼\næ„Ÿè°¢å¿—æ„¿è€… ${request.helper.username} çš„å¸®åŠ©`
      );
      
      // 5. æç¤ºç”¨æˆ·è¯„ä»·
      this.showRatingDialog(request.id);
      
    } catch (error) {
      logger.error('Failed to handle file:', error);
      UIManager.showError('æ–‡ä»¶ä¸‹è½½å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å‰å¾€ç½‘ç«™ä¸‹è½½');
    }
  }
  
  /**
   * è¯„ä»·å¿—æ„¿è€…
   */
  private showRatingDialog(requestId: string): void {
    // æ˜¾ç¤º1-5æ˜Ÿè¯„åˆ†ç•Œé¢
    // ...
  }
}
```

#### 4.1.2 Webç½‘ç«™ç•Œé¢
```tsx
// src/app/help/request/[id]/page.tsx
export default async function RequestDetailPage({ params }: { params: { id: string } }) {
  const request = await getRequestById(params.id);
  
  return (
    <div className="request-detail">
      <RequestStatus status={request.status} />
      
      {request.status === 'pending' && (
        <PendingView request={request} />
      )}
      
      {request.status === 'matched' && (
        <MatchedView request={request} channel={request.channel} />
      )}
      
      {request.status === 'completed' && (
        <CompletedView request={request} />
      )}
    </div>
  );
}

function MatchedView({ request, channel }) {
  return (
    <div className="matched-container">
      <Alert type="success">
        æœ‰å¿—æ„¿è€…æ„¿æ„å¸®åŠ©ï¼è¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼æ²Ÿé€š
      </Alert>
      
      <PrivateChat channel={channel} userType="requester" />
      
      <div className="instructions">
        <h3>æ¥æ”¶æ–‡ä»¶æ–¹å¼</h3>
        <ul>
          <li>
            <strong>å¹³å°ä¼ è¾“</strong>ï¼šå¿—æ„¿è€…ä¸Šä¼ åï¼Œæ‚¨ä¼šæ”¶åˆ°ä¸‹è½½é“¾æ¥
          </li>
          <li>
            <strong>ä¸´æ—¶é‚®ç®±</strong>ï¼šä½¿ç”¨ç³»ç»Ÿç”Ÿæˆçš„åŒ¿åé‚®ç®±æ¥æ”¶
            <code>{channel.temp_email}</code>
          </li>
        </ul>
      </div>
    </div>
  );
}

function CompletedView({ request }) {
  return (
    <div className="completed-container">
      <Alert type="success">
        è®ºæ–‡å·²å°±ç»ªï¼
      </Alert>
      
      <div className="download-section">
        <Button 
          variant="primary" 
          size="lg"
          onClick={() => window.location.href = request.file_url}
        >
          ä¸‹è½½ PDF
        </Button>
        <p className="expires-note">
          é“¾æ¥æœ‰æ•ˆæœŸè‡³ {formatDate(request.file_expires_at)}
        </p>
      </div>
      
      <RatingWidget requestId={request.id} />
    </div>
  );
}
```

### 4.2 å¿—æ„¿è€…æµç¨‹

#### 4.2.1 æ”¶åˆ°é€šçŸ¥
```tsx
// src/components/notifications/HelpRequestNotification.tsx
export function HelpRequestNotification({ notification }) {
  const [requestDetails, setRequestDetails] = useState(null);
  
  const handleView = async () => {
    const details = await fetchRequestDetails(notification.request_id);
    setRequestDetails(details);
  };
  
  return (
    <div className="notification-card">
      <div className="icon">ğŸ“„</div>
      <div className="content">
        <h4>æœ‰ç”¨æˆ·éœ€è¦æ‚¨çš„å¸®åŠ©</h4>
        <p>{notification.message}</p>
        <div className="meta">
          <span>â±ï¸ {formatTimeAgo(notification.created_at)}</span>
          <span>ğŸ“ æ¥è‡ª {notification.country}</span>
        </div>
      </div>
      <Button onClick={handleView}>æŸ¥çœ‹è¯¦æƒ…</Button>
    </div>
  );
}
```

#### 4.2.2 å¸®åŠ©ç¡®è®¤é¡µé¢
```tsx
// src/app/help/provide/[id]/page.tsx
export default async function ProvideHelpPage({ params }: { params: { id: string } }) {
  const request = await getRequestById(params.id);
  
  return (
    <div className="provide-help-container">
      <PaperInfoCard doi={request.doi} title={request.title} />
      
      <RequesterInfo 
        country={request.requester.country}
        memberLevel={request.requester.level}
        reputation={request.requester.reputation_score}
      />
      
      <ComplianceChecklist />
      
      <ActionButtons requestId={request.id} />
    </div>
  );
}

function ComplianceChecklist() {
  const [checked, setChecked] = useState({
    legalSource: false,
    noInstitutional: false,
    acceptResponsibility: false
  });
  
  const allChecked = Object.values(checked).every(v => v);
  
  return (
    <div className="compliance-section">
      <h3>âš ï¸ é‡è¦ï¼šè¯·ç¡®è®¤ä»¥ä¸‹å£°æ˜</h3>
      <div className="checklist">
        <label>
          <input 
            type="checkbox" 
            checked={checked.legalSource}
            onChange={e => setChecked({...checked, legalSource: e.target.checked})}
          />
          <span>
            æˆ‘ç¡®è®¤æ­¤æ–‡çŒ®æ¥è‡ª<strong>åˆæ³•é€”å¾„</strong>ï¼ˆå¼€æ”¾è·å–/ä¸ªäººè®¢é˜…/ä½œè€…æˆæƒï¼‰
          </span>
        </label>
        
        <label>
          <input 
            type="checkbox" 
            checked={checked.noInstitutional}
            onChange={e => setChecked({...checked, noInstitutional: e.target.checked})}
          />
          <span>
            æˆ‘ç†è§£<strong>ä¸å¾—ä½¿ç”¨æœºæ„è®¢é˜…è´¦å·</strong>ç³»ç»Ÿæ€§ä¸‹è½½å¹¶åˆ†å‘è®ºæ–‡
          </span>
        </label>
        
        <label>
          <input 
            type="checkbox" 
            checked={checked.acceptResponsibility}
            onChange={e => setChecked({...checked, acceptResponsibility: e.target.checked})}
          />
          <span>
            æˆ‘åŒæ„å¯¹ä¸Šä¼ å†…å®¹çš„<strong>åˆæ³•æ€§è´Ÿè´£</strong>
          </span>
        </label>
      </div>
      
      {!allChecked && (
        <Alert type="warning">
          è¯·ä»”ç»†é˜…è¯»å¹¶ç¡®è®¤æ‰€æœ‰å£°æ˜åæ‰èƒ½ç»§ç»­
        </Alert>
      )}
    </div>
  );
}

function ActionButtons({ requestId }) {
  const router = useRouter();
  
  const handleAccept = async () => {
    // åˆ›å»ºç§ä¿¡é€šé“
    const channel = await apiClient.post(`/api/requests/${requestId}/accept`);
    
    // è·³è½¬åˆ°ä¸Šä¼ ç•Œé¢
    router.push(`/help/upload/${requestId}`);
  };
  
  const handleDecline = async () => {
    await apiClient.post(`/api/requests/${requestId}/decline`);
    router.push('/dashboard');
  };
  
  return (
    <div className="action-buttons">
      <Button variant="primary" size="lg" onClick={handleAccept}>
        æˆ‘æ„¿æ„å¸®åŠ©
      </Button>
      <Button variant="ghost" onClick={handleDecline}>
        æš‚æ—¶æ— æ³•å¸®åŠ©
      </Button>
    </div>
  );
}
```

#### 4.2.3 æ–‡ä»¶ä¸Šä¼ ç•Œé¢
```tsx
// src/app/help/upload/[id]/page.tsx
export default function UploadPage({ params }: { params: { id: string } }) {
  const [file, setFile] = useState<File | null>(null);
  const [uploadMethod, setUploadMethod] = useState<'platform' | 'email'>('platform');
  const [uploading, setUploading] = useState(false);
  
  const handleUpload = async () => {
    if (!file) return;
    
    setUploading(true);
    
    try {
      if (uploadMethod === 'platform') {
        // ä¸Šä¼ åˆ°å¹³å°ä¸´æ—¶å­˜å‚¨
        const formData = new FormData();
        formData.append('file', file);
        formData.append('request_id', params.id);
        
        await apiClient.post('/api/files/upload-temp', formData);
        
        toast.success('æ–‡ä»¶å·²ä¸Šä¼ ï¼è¯·æ±‚è€…å°†æ”¶åˆ°ä¸‹è½½é€šçŸ¥');
      } else {
        // é€šè¿‡ä¸´æ—¶é‚®ç®±å‘é€
        // ...
      }
      
      router.push('/dashboard');
    } catch (error) {
      toast.error('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•');
    } finally {
      setUploading(false);
    }
  };
  
  return (
    <div className="upload-container">
      <h2>ä¸Šä¼ è®ºæ–‡å…¨æ–‡</h2>
      
      <div className="method-selector">
        <label>
          <input 
            type="radio" 
            value="platform" 
            checked={uploadMethod === 'platform'}
            onChange={e => setUploadMethod('platform')}
          />
          <span>é€šè¿‡å¹³å°ä¼ è¾“ï¼ˆæ¨èï¼‰</span>
          <small>æ–‡ä»¶åŠ å¯†å­˜å‚¨ï¼Œ24å°æ—¶åè‡ªåŠ¨åˆ é™¤</small>
        </label>
        
        <label>
          <input 
            type="radio" 
            value="email" 
            checked={uploadMethod === 'email'}
            onChange={e => setUploadMethod('email')}
          />
          <span>é€šè¿‡ä¸´æ—¶é‚®ç®±</span>
          <small>ç³»ç»Ÿç”ŸæˆåŒ¿åé‚®ç®±ï¼Œä¸å…¬å¼€åŒæ–¹èº«ä»½</small>
        </label>
      </div>
      
      <FileUploader 
        accept="application/pdf"
        onChange={setFile}
        file={file}
      />
      
      <Button 
        variant="primary" 
        size="lg"
        disabled={!file || uploading}
        onClick={handleUpload}
      >
        {uploading ? 'ä¸Šä¼ ä¸­...' : 'å‘é€ç»™è¯·æ±‚è€…'}
      </Button>
    </div>
  );
}
```

---

## 5. åˆè§„ä¸å®‰å…¨æªæ–½

### 5.1 ç”¨æˆ·åè®®ï¼ˆå¼ºåˆ¶é˜…è¯»ï¼‰

```markdown
### Researchopia å­¦æœ¯äº’åŠ©å¹³å°æœåŠ¡æ¡æ¬¾

#### 1. å¹³å°å®šä½
- Researchopiaä»…æä¾›**æ’®åˆæœåŠ¡**ï¼Œè¿æ¥è®ºæ–‡éœ€æ±‚è€…ä¸èµ„æºæ‹¥æœ‰è€…
- å¹³å°**ä¸å­˜å‚¨ã€ä¸åˆ†å‘**è®ºæ–‡å…¨æ–‡
- æ–‡ä»¶ä¼ è¾“å‘ç”Ÿåœ¨ç”¨æˆ·é—´ï¼Œå¹³å°ä»…æä¾›ä¸´æ—¶é€šé“

#### 2. å¿—æ„¿è€…ä¹‰åŠ¡
ä½œä¸ºå¸®åŠ©è€…ï¼Œæ‚¨å¿…é¡»ç¡®ä¿ï¼š
- âœ… ä¸Šä¼ çš„æ–‡çŒ®æ¥è‡ª**åˆæ³•é€”å¾„**ï¼ˆOA/ä¸ªäººè®¢é˜…/ä½œè€…æˆæƒï¼‰
- âŒ **ç¦æ­¢**ä½¿ç”¨æœºæ„è®¢é˜…è´¦å·ç³»ç»Ÿæ€§ä¸‹è½½å¹¶åˆ†å‘
- âœ… å¯¹ä¸Šä¼ å†…å®¹çš„åˆæ³•æ€§**æ‰¿æ‹…å…¨éƒ¨è´£ä»»**

#### 3. è¯·æ±‚è€…ä¹‰åŠ¡
ä½œä¸ºéœ€æ±‚è€…ï¼Œæ‚¨å¿…é¡»ç¡®ä¿ï¼š
- âœ… è·å–çš„æ–‡çŒ®ä»…ç”¨äº**ä¸ªäººå­¦ä¹ ç ”ç©¶**
- âŒ **ç¦æ­¢**ä»»ä½•å½¢å¼çš„å•†ä¸šä¼ æ’­æˆ–ç›ˆåˆ©ä½¿ç”¨
- âœ… å°Šé‡ç‰ˆæƒæ‰€æœ‰è€…çš„æƒç›Š

#### 4. å¹³å°å…è´£
- Researchopiaä½œä¸ºæŠ€æœ¯å¹³å°ï¼Œä¸å¯¹ç”¨æˆ·è¡Œä¸ºæ‰¿æ‹…ç‰ˆæƒè´£ä»»
- å¦‚æœ‰ä¾µæƒè¡Œä¸ºï¼Œè´£ä»»ç”±ä¸Šä¼ è€…å’Œä¸‹è½½è€…è‡ªè¡Œæ‰¿æ‹…
- å¹³å°æ”¶åˆ°DMCAé€šçŸ¥åå°†ç«‹å³ç§»é™¤ç›¸å…³å†…å®¹å¹¶å°ç¦è¿è§„ç”¨æˆ·

#### 5. ä½¿ç”¨é™åˆ¶
- æ¯æ—¥å¸®åŠ©ä»–äººä¸Šé™ï¼š5æ¬¡
- æ¯æ—¥è¯·æ±‚å¸®åŠ©ä¸Šé™ï¼š5æ¬¡
- åŒä¸€DOIè¯·æ±‚é—´éš”ï¼š24å°æ—¶
- æ–‡ä»¶é“¾æ¥æœ‰æ•ˆæœŸï¼š24å°æ—¶

#### 6. è¿è§„å¤„ç†
è¿åä¸Šè¿°æ¡æ¬¾å°†å¯¼è‡´ï¼š
- ç¬¬ä¸€æ¬¡ï¼šè­¦å‘Š
- ç¬¬äºŒæ¬¡ï¼š7å¤©ç¦ç”¨
- ç¬¬ä¸‰æ¬¡ï¼šæ°¸ä¹…å°ç¦

---

**ç‚¹å‡»"æˆ‘å·²é˜…è¯»å¹¶åŒæ„"å³è¡¨ç¤ºæ‚¨ç†è§£å¹¶æ¥å—ä»¥ä¸Šæ¡æ¬¾**
```

### 5.2 æŠ€æœ¯é™åˆ¶æªæ–½

#### 5.2.1 é€Ÿç‡é™åˆ¶
```typescript
// src/middleware/rate-limit.ts
import { rateLimit } from '@/lib/rate-limit';

export const requestRateLimit = rateLimit({
  windowMs: 24 * 60 * 60 * 1000, // 24å°æ—¶
  max: 5, // æœ€å¤š5æ¬¡è¯·æ±‚
  message: 'æ‚¨ä»Šå¤©çš„è¯·æ±‚æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼ˆ5æ¬¡ï¼‰ï¼Œè¯·æ˜å¤©å†è¯•'
});

export const helpRateLimit = rateLimit({
  windowMs: 24 * 60 * 60 * 1000, // 24å°æ—¶
  max: 5, // æœ€å¤šå¸®åŠ©5æ¬¡
  message: 'æ‚¨ä»Šå¤©çš„å¸®åŠ©æ¬¡æ•°å·²è¾¾ä¸Šé™ï¼ˆ5æ¬¡ï¼‰ï¼Œè¯·ä¼‘æ¯ä¸€ä¸‹å§ï¼'
});

export const sameDoiLimit = rateLimit({
  windowMs: 24 * 60 * 60 * 1000, // 24å°æ—¶
  max: 1, // åŒä¸€DOIåªèƒ½è¯·æ±‚1æ¬¡
  keyGenerator: (req) => `${req.user.id}:${req.body.doi}`,
  message: 'æ‚¨ä»Šå¤©å·²è¯·æ±‚è¿‡æ­¤è®ºæ–‡ï¼Œè¯·24å°æ—¶åå†è¯•'
});
```

#### 5.2.2 æ–‡ä»¶è‡ªåŠ¨åˆ é™¤
```typescript
// src/cron/cleanup-temp-files.ts
import cron from 'node-cron';

// æ¯å°æ—¶è¿è¡Œä¸€æ¬¡ï¼Œæ¸…ç†è¿‡æœŸæ–‡ä»¶
cron.schedule('0 * * * *', async () => {
  logger.info('[Cleanup] Starting temp file cleanup...');
  
  // 1. æŸ¥æ‰¾è¿‡æœŸæ–‡ä»¶
  const { data: expiredRequests } = await supabase
    .from('paper_requests')
    .select('id, file_url')
    .eq('status', 'completed')
    .lt('file_expires_at', new Date().toISOString())
    .not('file_url', 'is', null);
  
  // 2. ä»S3åˆ é™¤æ–‡ä»¶
  for (const request of expiredRequests || []) {
    try {
      const fileName = extractFileNameFromUrl(request.file_url);
      await s3Client.send(new DeleteObjectCommand({
        Bucket: process.env.AWS_S3_BUCKET,
        Key: fileName
      }));
      
      logger.info(`[Cleanup] Deleted file: ${fileName}`);
    } catch (error) {
      logger.error(`[Cleanup] Failed to delete file:`, error);
    }
  }
  
  // 3. æ›´æ–°æ•°æ®åº“
  await supabase
    .from('paper_requests')
    .update({ file_url: null })
    .in('id', expiredRequests?.map(r => r.id) || []);
  
  logger.info(`[Cleanup] Cleaned up ${expiredRequests?.length || 0} expired files`);
});
```

#### 5.2.3 å¼‚å¸¸æ£€æµ‹
```typescript
// src/lib/abuse-detection.ts
export class AbuseDetection {
  /**
   * æ£€æµ‹å¼‚å¸¸è¡Œä¸ºæ¨¡å¼
   */
  async detectAnomalies(userId: string): Promise<AnomalyReport> {
    const report: AnomalyReport = {
      user_id: userId,
      anomalies: [],
      risk_score: 0
    };
    
    // 1. æ£€æµ‹æ‰¹é‡è¯·æ±‚ï¼ˆ1å°æ—¶å†…è¶…è¿‡3æ¬¡ï¼‰
    const { count: hourlyCount } = await supabase
      .from('paper_requests')
      .select('*', { count: 'exact', head: true })
      .eq('requester_id', userId)
      .gte('created_at', new Date(Date.now() - 60 * 60 * 1000).toISOString());
    
    if (hourlyCount && hourlyCount > 3) {
      report.anomalies.push({
        type: 'rapid_requests',
        severity: 'HIGH',
        message: `1å°æ—¶å†…è¯·æ±‚${hourlyCount}æ¬¡`
      });
      report.risk_score += 5;
    }
    
    // 2. æ£€æµ‹ç›¸ä¼¼DOIæ¨¡å¼ï¼ˆå¯èƒ½æ˜¯çˆ¬è™«ï¼‰
    const recentRequests = await supabase
      .from('paper_requests')
      .select('doi')
      .eq('requester_id', userId)
      .gte('created_at', new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString());
    
    const dois = recentRequests.data?.map(r => r.doi) || [];
    const similarityScore = this.calculateDoiSimilarity(dois);
    
    if (similarityScore > 0.8) {
      report.anomalies.push({
        type: 'sequential_dois',
        severity: 'MEDIUM',
        message: 'DOIåºåˆ—ç›¸ä¼¼åº¦å¼‚å¸¸é«˜ï¼Œå¯èƒ½ä¸ºæ‰¹é‡çˆ¬å–'
      });
      report.risk_score += 3;
    }
    
    // 3. æ£€æµ‹ä½è¯„åˆ† + é«˜è¯·æ±‚ï¼ˆæ»¥ç”¨è€…ï¼‰
    const user = await getUserById(userId);
    if (user.reputation_score < 2.0 && user.help_received_count > 10) {
      report.anomalies.push({
        type: 'low_reputation_high_usage',
        severity: 'MEDIUM',
        message: 'è¯„åˆ†ä½ä½†ä½¿ç”¨é¢‘ç¹'
      });
      report.risk_score += 2;
    }
    
    return report;
  }
  
  /**
   * è®¡ç®—DOIåºåˆ—ç›¸ä¼¼åº¦ï¼ˆæ£€æµ‹æ‰¹é‡çˆ¬å–ï¼‰
   */
  private calculateDoiSimilarity(dois: string[]): number {
    if (dois.length < 2) return 0;
    
    // ç¤ºä¾‹ï¼šæ£€æµ‹DOIæ˜¯å¦ä¸ºè¿ç»­ç¼–å·ï¼ˆå¦‚ 10.1234/001, 10.1234/002ï¼‰
    const prefixes = dois.map(doi => doi.split('/')[0]);
    const uniquePrefixes = new Set(prefixes);
    
    // å¦‚æœéƒ½æ˜¯åŒä¸€å‡ºç‰ˆå•†ä¸”ç¼–å·è¿ç»­ï¼Œç›¸ä¼¼åº¦é«˜
    if (uniquePrefixes.size === 1) {
      const suffixes = dois.map(doi => doi.split('/')[1]);
      const numericSuffixes = suffixes.filter(s => /^\d+$/.test(s));
      
      if (numericSuffixes.length === dois.length) {
        // æ£€æµ‹æ˜¯å¦è¿ç»­
        const sorted = numericSuffixes.map(Number).sort((a, b) => a - b);
        const isSequential = sorted.every((num, idx, arr) => 
          idx === 0 || num === arr[idx - 1] + 1
        );
        
        return isSequential ? 1.0 : 0.5;
      }
    }
    
    return 0;
  }
}

interface AnomalyReport {
  user_id: string;
  anomalies: Array<{
    type: string;
    severity: 'LOW' | 'MEDIUM' | 'HIGH';
    message: string;
  }>;
  risk_score: number;
}
```

---

## 6. æ¿€åŠ±æœºåˆ¶è®¾è®¡

### 6.1 ç§¯åˆ†ç³»ç»Ÿ
```typescript
// src/lib/credit-system.ts
export class CreditSystem {
  /**
   * å¥–åŠ±å¸®åŠ©è¡Œä¸º
   */
  async rewardHelp(helperId: string, requestId: string): Promise<void> {
    const BASE_REWARD = 10;
    
    // è®¡ç®—å¥–åŠ±ç§¯åˆ†
    const request = await getRequestById(requestId);
    let reward = BASE_REWARD;
    
    // é«˜é£é™©è®ºæ–‡é¢å¤–å¥–åŠ±
    if (request.risk_level === 'HIGH') {
      reward += 5;
    }
    
    // å¿«é€Ÿå“åº”å¥–åŠ±
    const responseTime = Date.now() - new Date(request.created_at).getTime();
    if (responseTime < 5 * 60 * 1000) { // 5åˆ†é’Ÿå†…å“åº”
      reward += 3;
    }
    
    // å‘æ”¾ç§¯åˆ†
    await supabase.rpc('add_credits', {
      user_id: helperId,
      amount: reward,
      reason: `å¸®åŠ©è·å–è®ºæ–‡: ${request.doi}`
    });
    
    // æ›´æ–°ç»Ÿè®¡
    await supabase
      .from('users')
      .update({
        help_provided_count: supabase.raw('help_provided_count + 1')
      })
      .eq('id', helperId);
  }
  
  /**
   * æ‰£é™¤è¯·æ±‚ç§¯åˆ†
   */
  async deductRequest(userId: string, amount: number): Promise<void> {
    await supabase.rpc('deduct_credits', {
      user_id: userId,
      amount,
      reason: 'å‘èµ·è®ºæ–‡è¯·æ±‚'
    });
  }
}
```

### 6.2 å¾½ç« ç³»ç»Ÿ
```typescript
// src/lib/badge-system.ts
export const BADGES = {
  FIRST_HELP: {
    id: 'first_help',
    name: 'åˆå‡ºèŒ…åº',
    icon: 'ğŸŒ±',
    description: 'é¦–æ¬¡å¸®åŠ©ä»–äººè·å–è®ºæ–‡',
    condition: (user) => user.help_provided_count >= 1
  },
  HELPFUL_10: {
    id: 'helpful_10',
    name: 'ä¹äºåŠ©äºº',
    icon: 'ğŸ¤',
    description: 'å¸®åŠ©ä»–äºº10æ¬¡',
    condition: (user) => user.help_provided_count >= 10
  },
  HELPFUL_50: {
    id: 'helpful_50',
    name: 'å­¦æœ¯å¤©ä½¿',
    icon: 'ğŸ‘¼',
    description: 'å¸®åŠ©ä»–äºº50æ¬¡',
    condition: (user) => user.help_provided_count >= 50
  },
  FAST_RESPONDER: {
    id: 'fast_responder',
    name: 'é—ªç”µä¾ ',
    icon: 'âš¡',
    description: 'è¿ç»­5æ¬¡åœ¨5åˆ†é’Ÿå†…å“åº”è¯·æ±‚',
    condition: (user) => user.fast_response_streak >= 5
  },
  HIGH_REPUTATION: {
    id: 'high_reputation',
    name: 'å¤‡å—ä¿¡èµ–',
    icon: 'â­',
    description: 'å¹³å‡è¯„åˆ†è¾¾åˆ°4.8åˆ†ä»¥ä¸Š',
    condition: (user) => user.reputation_score >= 4.8
  }
};

export async function checkAndAwardBadges(userId: string): Promise<string[]> {
  const user = await getUserById(userId);
  const newBadges: string[] = [];
  
  for (const [key, badge] of Object.entries(BADGES)) {
    if (badge.condition(user) && !user.badges.includes(badge.id)) {
      // æˆäºˆå¾½ç« 
      await supabase
        .from('user_badges')
        .insert({
          user_id: userId,
          badge_id: badge.id,
          awarded_at: new Date()
        });
      
      newBadges.push(badge.id);
      
      // å‘é€é€šçŸ¥
      await notifyUser({
        user_id: userId,
        type: 'badge_awarded',
        title: `ğŸ‰ è·å¾—æ–°å¾½ç« ï¼š${badge.name}`,
        message: badge.description
      });
    }
  }
  
  return newBadges;
}
```

### 6.3 æ’è¡Œæ¦œ
```tsx
// src/app/leaderboard/page.tsx
export default async function LeaderboardPage() {
  const topHelpers = await supabase
    .from('users')
    .select('username, help_provided_count, reputation_score, badges')
    .eq('is_verified', true)
    .order('help_provided_count', { ascending: false })
    .limit(50);
  
  return (
    <div className="leaderboard-container">
      <h1>å¿—æ„¿è€…è£èª‰æ¦œ ğŸ†</h1>
      
      <div className="leaderboard-list">
        {topHelpers.data?.map((user, index) => (
          <LeaderboardCard 
            key={user.id}
            rank={index + 1}
            username={user.username}
            helpCount={user.help_provided_count}
            reputation={user.reputation_score}
            badges={user.badges}
          />
        ))}
      </div>
    </div>
  );
}
```

---

## 7. å®æ–½è·¯çº¿å›¾

### Phase 1: MVP (Week 1-2)
- [ ] æ•°æ®åº“è¡¨è®¾è®¡ä¸è¿ç§»
- [ ] æœºæ„é‚®ç®±éªŒè¯åŠŸèƒ½
- [ ] åŸºç¡€è¯·æ±‚/åŒ¹é…API
- [ ] ç®€æ˜“Webç•Œé¢ï¼ˆè¯·æ±‚/å¸®åŠ©æµç¨‹ï¼‰

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (Week 3-4)
- [ ] æ™ºèƒ½é…å¯¹ç®—æ³•ä¼˜åŒ–
- [ ] ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ï¼ˆS3 + åŠ å¯†ï¼‰
- [ ] ç§ä¿¡é€šé“ï¼ˆWebSocketï¼‰
- [ ] Zoteroæ’ä»¶é›†æˆ

### Phase 3: å®‰å…¨ä¸åˆè§„ (Week 5-6)
- [ ] é£é™©è¯„ä¼°ç³»ç»Ÿ
- [ ] é€Ÿç‡é™åˆ¶ä¸æ»¥ç”¨æ£€æµ‹
- [ ] ç”¨æˆ·åè®®å¼ºåˆ¶ç¡®è®¤
- [ ] DMCAå“åº”æµç¨‹

### Phase 4: æ¿€åŠ±ä¸ä¼˜åŒ– (Week 7-8)
- [ ] ç§¯åˆ†ç³»ç»Ÿ
- [ ] å¾½ç« ç³»ç»Ÿ
- [ ] æ’è¡Œæ¦œ
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜ã€CDNï¼‰

---

## 8. æˆæœ¬ä¼°ç®—

### æŠ€æœ¯æˆæœ¬
| é¡¹ç›® | æœˆåº¦æˆæœ¬ | è¯´æ˜ |
|------|---------|------|
| S3/OSS å­˜å‚¨ | $20 | ä¸´æ—¶æ–‡ä»¶ï¼Œ24å°æ—¶è‡ªåŠ¨åˆ é™¤ |
| æ•°æ®ä¼ è¾“ | $50 | æŒ‰æµé‡è®¡è´¹ |
| WebSocket æœåŠ¡ | $30 | å®æ—¶é€šçŸ¥ |
| **æ€»è®¡** | **$100** | |

### äººåŠ›æˆæœ¬
- **å¼€å‘**: 2äºº Ã— 8å‘¨ â‰ˆ 4äººæœˆ
- **æµ‹è¯•**: 1äºº Ã— 2å‘¨ â‰ˆ 0.5äººæœˆ
- **è¿è¥**: å…¼èŒ 1äºº

---

## 9. é£é™©ä¸åº”å¯¹

### æ³•å¾‹é£é™©
| é£é™© | ç­‰çº§ | åº”å¯¹æªæ–½ |
|------|------|----------|
| é—´æ¥ä¾µæƒè¯‰è®¼ | ğŸŸ¡ ä¸­ | å¼ºåˆ¶ç”¨æˆ·åè®® + å¹³å°å…è´£ + DMCAå¿«é€Ÿå“åº” |
| å‡ºç‰ˆå•†æ–½å‹ | ğŸŸ¢ ä½ | ä¸æ‰˜ç®¡æ–‡ä»¶ + 24å°æ—¶è‡ªåŠ¨åˆ é™¤ |

### æŠ€æœ¯é£é™©
| é£é™© | ç­‰çº§ | åº”å¯¹æªæ–½ |
|------|------|----------|
| æ»¥ç”¨/çˆ¬è™« | ğŸŸ¡ ä¸­ | é€Ÿç‡é™åˆ¶ + å¼‚å¸¸æ£€æµ‹ + éªŒè¯ç  |
| æ–‡ä»¶æ³„éœ² | ğŸŸ¢ ä½ | ç«¯åˆ°ç«¯åŠ å¯† + ä¸€æ¬¡æ€§ä¸‹è½½é“¾æ¥ |

### è¿è¥é£é™©
| é£é™© | ç­‰çº§ | åº”å¯¹æªæ–½ |
|------|------|----------|
| å¿—æ„¿è€…ä¸è¶³ | ğŸŸ¡ ä¸­ | ç§¯åˆ†æ¿€åŠ± + å¾½ç« ç³»ç»Ÿ + ç¤¾åŒºå»ºè®¾ |
| ç”¨æˆ·ä½“éªŒå·® | ğŸŸ¢ ä½ | å¿«é€Ÿè¿­ä»£ + ç”¨æˆ·åé¦ˆ |

---

## 10. æ€»ç»“

### æ ¸å¿ƒä¼˜åŠ¿
- âœ… **æ³•å¾‹é£é™©æœ€å°**ï¼šä»…æ’®åˆï¼Œä¸æ‰˜ç®¡
- âœ… **ç”¨æˆ·è‡ªä¸»**ï¼šå¿—æ„¿è€…ä¸»åŠ¨é€‰æ‹©ï¼Œæ— å¼ºåˆ¶
- âœ… **ç²¾å‡†åŒ¹é…**ï¼šæœºæ„é‚®ç®±è¯†åˆ«ï¼Œæé«˜æˆåŠŸç‡
- âœ… **ç¤¾åŒºé©±åŠ¨**ï¼šç§¯åˆ† + å¾½ç«  + æ’è¡Œæ¦œï¼Œå»ºç«‹ç”Ÿæ€

### ä¸ä¼ ç»Ÿæ–¹æ¡ˆå¯¹æ¯”
| æ–¹æ¡ˆ | åˆæ³•æ€§ | è¦†ç›–ç‡ | é€Ÿåº¦ | æˆæœ¬ |
|------|--------|--------|------|------|
| **Sci-Hub** | âŒ éæ³• | 85% | å¿« | å…è´¹ |
| **ç§‘ç ”é€š** | ğŸŸ¡ ç°è‰² | 70% | ä¸­ | ç§¯åˆ† |
| **æœ¬æ–¹æ¡ˆ** | âœ… åˆæ³• | 50%+ | ä¸­ | ç§¯åˆ† |
| **OAèšåˆ** | âœ… åˆæ³• | 30% | å³æ—¶ | å…è´¹ |

### å»ºè®®å®æ–½ç­–ç•¥
1. **å…ˆåšOAèšåˆ**ï¼ˆPhase 0ï¼Œé›¶é£é™©ï¼‰
2. **å°è§„æ¨¡å†…æµ‹**äº’åŠ©å¹³å°ï¼ˆ50-100ç”¨æˆ·ï¼‰
3. **æ³•å¾‹å’¨è¯¢**ç¡®è®¤æœ€ç»ˆæ–¹æ¡ˆåˆè§„æ€§
4. **é€æ­¥å¼€æ”¾**ï¼Œå¯†åˆ‡ç›‘æ§æ»¥ç”¨æƒ…å†µ

---

**æ–‡æ¡£ç»“æŸ**
