# 10.7.1 è®ºæ–‡è¯¦æƒ…é¡µä¼˜åŒ–æ–¹æ¡ˆ | Paper Detail Page Optimization Design

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¥æœŸ**: 2025-01-17  
> **å…³è”æ–‡ä»¶**: `src/app/papers/[...id]/page.tsx` (286è¡Œ)  
> **å‚è€ƒæ–‡æ¡£**: [10.7-Homepage-Optimization.md](./10.7-Homepage-Optimization.md)

---

## ä¸€ã€ç°çŠ¶åˆ†æ

### 1.1 å½“å‰é¡µé¢ç»“æ„

```
PaperDetailPage (286è¡Œ)
â”œâ”€â”€ Breadcrumb Navigation (é¦–é¡µ > è®ºæ–‡è¯¦æƒ…)
â”œâ”€â”€ Paper Header Card
â”‚   â”œâ”€â”€ Title (æ ‡é¢˜)
â”‚   â”œâ”€â”€ Authors + Date + Journal (å…ƒä¿¡æ¯)
â”‚   â”œâ”€â”€ DOI Link (å¤–éƒ¨é“¾æ¥)
â”‚   â”œâ”€â”€ Keywords (å…³é”®è¯æ ‡ç­¾)
â”‚   â””â”€â”€ Abstract (æ‘˜è¦)
â”œâ”€â”€ QuickSearch (å¿«é€Ÿæœç´¢)
â”œâ”€â”€ ç›¸å…³æ–°é—»æŠ¥é“ (å¼€å‘ä¸­å ä½)
â”œâ”€â”€ Rating Section (2åˆ—å¸ƒå±€)
â”‚   â”œâ”€â”€ EvaluationForm (å·¦ä¾§)
â”‚   â””â”€â”€ RatingDisplay (å³ä¾§)
â”œâ”€â”€ Comments Section (è¯„è®ºåˆ—è¡¨)
â””â”€â”€ Zotero Annotations (æ‰¹æ³¨åŒºåŸŸ)
```

### 1.2 å½“å‰é—®é¢˜

| é—®é¢˜ | æè¿° | ä¸¥é‡ç¨‹åº¦ |
|------|------|----------|
| **å¸ƒå±€è¿‡äºçº¿æ€§** | æ‰€æœ‰å†…å®¹å‚ç›´å †å ï¼Œä¿¡æ¯å¯†åº¦ä½ | ğŸŸ¡ ä¸­ |
| **è§†è§‰å±‚æ¬¡ä¸æ¸…** | æ ‡é¢˜ã€å…ƒä¿¡æ¯ã€å†…å®¹çš„è§†è§‰æƒé‡ç›¸ä¼¼ | ğŸŸ¡ ä¸­ |
| **æ— æ”¶è—å…¥å£** | è¯¦æƒ…é¡µæ— æ³•å¿«é€Ÿæ”¶è—è®ºæ–‡ | ğŸ”´ é«˜ |
| **æ— åˆ†äº«åŠŸèƒ½** | ç¼ºå°‘ç¤¾äº¤åˆ†äº«æŒ‰é’® | ğŸŸ¡ ä¸­ |
| **ç§»åŠ¨ç«¯é€‚é…** | 2åˆ—å¸ƒå±€åœ¨ç§»åŠ¨ç«¯å¯èƒ½æ‹¥æŒ¤ | ğŸŸ¡ ä¸­ |
| **æ— ç›¸å…³æ¨è** | ç¼ºå°‘ç›¸å…³è®ºæ–‡æ¨è | ğŸŸ¡ ä¸­ |
| **åŠ è½½çŠ¶æ€å•è°ƒ** | éª¨æ¶å±ä¸å¤Ÿç²¾è‡´ | ğŸŸ¢ ä½ |

### 1.3 ç«å“å‚è€ƒ

| å¹³å° | ä¼˜ç‚¹ | å¯å€Ÿé‰´ |
|------|------|--------|
| **Google Scholar** | ç®€æ´ã€å¼•ç”¨ç»Ÿè®¡ã€PDFé“¾æ¥çªå‡º | å¼•ç”¨æ•°å±•ç¤º |
| **Semantic Scholar** | AI æ‘˜è¦ã€ç›¸å…³è®ºæ–‡ã€ä½œè€…ä¿¡æ¯ä¸°å¯Œ | ç›¸å…³è®ºæ–‡æ¨è |
| **ResearchGate** | ç¤¾äº¤äº’åŠ¨ã€é˜…è¯»ç»Ÿè®¡ã€è¯·æ±‚å…¨æ–‡ | äº’åŠ¨åŠŸèƒ½ |
| **arXiv** | ç‰ˆæœ¬å†å²ã€PDF/HTMLåˆ‡æ¢ | å¤šæ ¼å¼æ”¯æŒ |
| **Connected Papers** | å¯è§†åŒ–å¼•ç”¨å…³ç³» | çŸ¥è¯†å›¾è°± |
| **è±†ç“£è¯»ä¹¦** | è¯„åˆ†åˆ†å¸ƒå›¾ã€ä¹¦è¯„æ’è¡Œã€æƒ³è¯»/åœ¨è¯»/è¯»è¿‡ | é˜…è¯»çŠ¶æ€æ ‡è®° |

---

## äºŒã€è®¾è®¡ç›®æ ‡

### 2.1 çŸ­æœŸç›®æ ‡ï¼ˆ1-2å‘¨ï¼‰

1. **å¢å¼ºå¤´éƒ¨åŒºåŸŸ** - æ·»åŠ æ”¶è—æŒ‰é’®ã€åˆ†äº«æŒ‰é’®ã€æµè§ˆé‡å±•ç¤º
2. **ä¼˜åŒ–å¸ƒå±€** - é‡‡ç”¨å·¦å³åˆ†æ å¸ƒå±€ï¼Œå·¦ä¾§è®ºæ–‡ä¿¡æ¯ï¼Œå³ä¾§å¿«æ·æ“ä½œ
3. **æ”¹è¿›è§†è§‰å±‚æ¬¡** - åŒºåˆ†æ ¸å¿ƒä¿¡æ¯ä¸è¾…åŠ©ä¿¡æ¯

### 2.2 é•¿æœŸç›®æ ‡ï¼ˆ1-2æœˆï¼‰

1. **ç›¸å…³è®ºæ–‡æ¨è** - åŸºäºå…³é”®è¯å’Œå¼•ç”¨å…³ç³»æ¨è
2. **é˜…è¯»çŠ¶æ€ç®¡ç†** - æƒ³è¯»/åœ¨è¯»/å·²è¯»æ ‡è®°
3. **å¼•ç”¨ç»Ÿè®¡** - å±•ç¤ºå¼•ç”¨æ•°ã€è¢«å¼•æ•°
4. **AI æ‘˜è¦/å…³é”®ç‚¹** - è‡ªåŠ¨ç”Ÿæˆè®ºæ–‡è¦ç‚¹

---

## ä¸‰ã€çŸ­æœŸæ–¹æ¡ˆï¼ˆæ¨èå®æ–½ï¼‰

### 3.1 æ”¹è¿›åçš„é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Breadcrumb: é¦–é¡µ > è®ºæ–‡è¯„ä»· > è®ºæ–‡è¯¦æƒ…                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                           â”‚                         â”‚
â”‚  ğŸ“„ Paper Header (ä¸»è¦åŒºåŸŸ)                â”‚  ğŸ“Š Quick Stats Card    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ã€è®ºæ–‡æ ‡é¢˜ - å¤§å·åŠ ç²—ã€‘                    â”‚  â­ 4.2 (18æ¡è¯„åˆ†)       â”‚
â”‚                                           â”‚  ğŸ’¬ 23 æ¡è¯„è®º           â”‚
â”‚  ğŸ‘¤ ä½œè€…1, ä½œè€…2, ä½œè€…3                    â”‚  ğŸ‘ 1,234 æ¬¡æµè§ˆ         â”‚
â”‚  ğŸ“… 2024-01-15 Â· ğŸ“° Nature                â”‚                         â”‚
â”‚  ğŸ”— DOI: 10.1038/xxx                      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                           â”‚  â­ æ”¶è—    ğŸ”— åˆ†äº«      â”‚
â”‚  ğŸ·ï¸ [å…³é”®è¯1] [å…³é”®è¯2] [å…³é”®è¯3]          â”‚  ğŸ“– é˜…è¯»åŸæ–‡             â”‚
â”‚                                           â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ æ‘˜è¦ Abstract                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Lorem ipsum dolor sit amet, consectetur adipiscing elit...         â”‚
â”‚  [å±•å¼€å…¨æ–‡ â–¼]                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” å¿«é€Ÿæœç´¢ (Google Scholar / Semantic Scholar / arXiv)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â­ è¯„åˆ†åŒºåŸŸ                              â”‚  ğŸ“Š è¯„åˆ†åˆ†å¸ƒ            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  EvaluationForm                           â”‚  RatingDisplay          â”‚
â”‚  (ä½¿ç”¨ Tab åˆ‡æ¢ "æˆ‘çš„è¯„åˆ†" / "ä»–äººè¯„åˆ†")   â”‚  (è¯„åˆ†ç»Ÿè®¡ + å›¾è¡¨)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ è¯„è®ºåŒº Comments                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  [æ’åº: æœ€æ–° | æœ€çƒ­] [ç­›é€‰: å…¨éƒ¨ | ä»…ç²¾å]                           â”‚
â”‚  CommentList                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Zotero æ‰¹æ³¨                                                     â”‚
â”‚  ZoteroAnnotations                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“š ç›¸å…³è®ºæ–‡æ¨è (é•¿æœŸ)                                              â”‚
â”‚  [ç›¸å…³è®ºæ–‡å¡ç‰‡1] [ç›¸å…³è®ºæ–‡å¡ç‰‡2] [ç›¸å…³è®ºæ–‡å¡ç‰‡3]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ–°å¢ç»„ä»¶è®¾è®¡

#### 3.2.1 QuickStatsCard (å¿«æ·ä¿¡æ¯å¡ç‰‡)

```tsx
// src/components/papers/QuickStatsCard.tsx

interface QuickStatsCardProps {
  paperId: string
  paperDOI?: string | null
  rating: {
    average: number
    count: number
  }
  commentCount: number
  viewCount: number
}

export default function QuickStatsCard({ 
  paperId, 
  paperDOI,
  rating, 
  commentCount, 
  viewCount 
}: QuickStatsCardProps) {
  return (
    <div className="bg-white dark:bg-gray-800 rounded-lg border p-4 sticky top-20">
      {/* Stats */}
      <div className="space-y-3 mb-4">
        <StatItem 
          icon={<Star />} 
          label="å¹³å‡è¯„åˆ†" 
          value={`${rating.average.toFixed(1)} (${rating.count}æ¡)`} 
        />
        <StatItem 
          icon={<MessageCircle />} 
          label="è¯„è®º" 
          value={`${commentCount} æ¡`} 
        />
        <StatItem 
          icon={<Eye />} 
          label="æµè§ˆ" 
          value={`${viewCount.toLocaleString()} æ¬¡`} 
        />
      </div>
      
      <div className="border-t pt-4 space-y-2">
        {/* Bookmark Button - å¤ç”¨ BookmarkButton */}
        <BookmarkButton 
          url={`/papers/${paperDOI || paperId}`}
          title={paperTitle}
          variant="button"
          className="w-full"
        />
        
        {/* Share Button */}
        <ShareButton url={window.location.href} />
        
        {/* Read Original */}
        {paperDOI && (
          <a 
            href={`https://doi.org/${paperDOI}`}
            target="_blank"
            className="w-full btn-secondary flex items-center justify-center gap-2"
          >
            <ExternalLink size={16} />
            é˜…è¯»åŸæ–‡
          </a>
        )}
      </div>
    </div>
  )
}
```

#### 3.2.2 PaperHeader (å¢å¼ºçš„å¤´éƒ¨ç»„ä»¶)

```tsx
// src/components/papers/PaperHeader.tsx

interface PaperHeaderProps {
  paper: Paper
}

export default function PaperHeader({ paper }: PaperHeaderProps) {
  return (
    <div className="bg-white dark:bg-gray-800 rounded-lg border p-6">
      {/* Title with larger font */}
      <h1 className="text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4 leading-tight">
        {paper.title}
      </h1>
      
      {/* Authors - linkable in future */}
      <div className="flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-3">
        <Users size={16} />
        <span className="text-sm">
          {paper.authors?.join(', ') || 'æœªçŸ¥ä½œè€…'}
        </span>
      </div>
      
      {/* Meta row: Date + Journal + DOI */}
      <div className="flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-4">
        {paper.publication_date && (
          <span className="flex items-center gap-1">
            <Calendar size={14} />
            {new Date(paper.publication_date).toLocaleDateString('zh-CN')}
          </span>
        )}
        {paper.journal && (
          <span className="italic">{paper.journal}</span>
        )}
        {paper.doi && (
          <a 
            href={`https://doi.org/${paper.doi}`}
            target="_blank"
            className="text-blue-600 hover:underline"
          >
            DOI: {paper.doi}
          </a>
        )}
      </div>
      
      {/* Keywords as compact pills */}
      {paper.keywords?.length > 0 && (
        <div className="flex flex-wrap gap-1.5">
          {paper.keywords.map((kw, i) => (
            <span 
              key={i}
              className="px-2 py-0.5 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-full"
            >
              {kw}
            </span>
          ))}
        </div>
      )}
    </div>
  )
}
```

#### 3.2.3 ShareButton (åˆ†äº«æŒ‰é’®)

```tsx
// src/components/shared/ShareButton.tsx

interface ShareButtonProps {
  url: string
  title?: string
  className?: string
}

export default function ShareButton({ url, title, className }: ShareButtonProps) {
  const [copied, setCopied] = useState(false)

  const handleShare = async () => {
    // Try native share API first (mobile)
    if (navigator.share) {
      try {
        await navigator.share({ url, title })
        return
      } catch (e) {
        // User cancelled or not supported
      }
    }
    
    // Fallback to clipboard
    await navigator.clipboard.writeText(url)
    setCopied(true)
    setTimeout(() => setCopied(false), 2000)
  }

  return (
    <button onClick={handleShare} className={className}>
      {copied ? <Check size={16} /> : <Share2 size={16} />}
      {copied ? 'å·²å¤åˆ¶' : 'åˆ†äº«'}
    </button>
  )
}
```

### 3.3 é¡µé¢é‡æ„ç¤ºä¾‹

```tsx
// src/app/papers/[...id]/page.tsx (é‡æ„å)

export default function PaperDetailPage() {
  // ... existing state and hooks ...

  return (
    <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {/* Breadcrumb */}
      <Breadcrumb items={[
        { label: 'é¦–é¡µ', href: '/' },
        { label: 'è®ºæ–‡è¯„ä»·', href: '/papers' },
        { label: 'è®ºæ–‡è¯¦æƒ…' }
      ]} />

      {/* Main Content: 2 columns on desktop */}
      <div className="mt-6 grid grid-cols-1 lg:grid-cols-4 gap-6">
        {/* Left: Paper Info (3 cols) */}
        <div className="lg:col-span-3 space-y-6">
          <PaperHeader paper={paper} />
          
          {/* Abstract with expand/collapse */}
          <AbstractSection abstract={paper.abstract} />
          
          {/* Quick Search */}
          <QuickSearch paper={paper} />
          
          {/* Rating Section */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <EvaluationForm ... />
            <RatingDisplay ... />
          </div>
          
          {/* Comments */}
          <CommentList ... />
          
          {/* Zotero Annotations */}
          <ZoteroAnnotations ... />
        </div>

        {/* Right: Sidebar (1 col) - sticky */}
        <div className="lg:col-span-1">
          <QuickStatsCard
            paperId={paper.id}
            paperDOI={paper.doi}
            rating={...}
            commentCount={paper.comments?.length || 0}
            viewCount={paper.view_count || 0}
          />
        </div>
      </div>
    </div>
  )
}
```

### 3.4 å®æ–½æ­¥éª¤

| æ­¥éª¤ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| 1 | åˆ›å»º `QuickStatsCard.tsx` | 1h | P0 |
| 2 | åˆ›å»º `ShareButton.tsx` | 30min | P0 |
| 3 | é‡æ„ `PaperHeader` ä¸ºç‹¬ç«‹ç»„ä»¶ | 1h | P1 |
| 4 | ä¿®æ”¹é¡µé¢å¸ƒå±€ä¸ºå·¦å³åˆ†æ  | 1h | P1 |
| 5 | æ·»åŠ æµè§ˆé‡ API å’Œå±•ç¤º | 30min | P2 |
| 6 | ä¼˜åŒ–éª¨æ¶å±åŠ è½½çŠ¶æ€ | 30min | P3 |
| 7 | å“åº”å¼æµ‹è¯•ä¸è°ƒæ•´ | 1h | P1 |
| **æ€»è®¡** | | **~6å°æ—¶** | |

---

## å››ã€é•¿æœŸæ–¹æ¡ˆï¼ˆå‚è€ƒè®¾è®¡ï¼‰

### 4.1 ç›¸å…³è®ºæ–‡æ¨è

#### 4.1.1 åŸºäºå…³é”®è¯çš„æ¨è

```tsx
// API: GET /api/papers/[id]/related?limit=5

// åç«¯å®ç°æ€è·¯
const getRelatedPapers = async (paperId: string, limit = 5) => {
  const paper = await getPaper(paperId)
  
  // 1. å…³é”®è¯åŒ¹é…
  const keywordMatches = await supabase
    .from('papers')
    .select('*')
    .neq('id', paperId)
    .overlaps('keywords', paper.keywords)
    .limit(limit)
  
  // 2. åŸºäºå‘é‡ç›¸ä¼¼åº¦ï¼ˆéœ€è¦ embedding æ”¯æŒï¼‰
  // const embeddingMatches = await supabase.rpc('match_papers', { 
  //   query_embedding: paper.embedding,
  //   match_threshold: 0.8
  // })
  
  return keywordMatches
}
```

#### 4.1.2 ç›¸å…³è®ºæ–‡å±•ç¤ºç»„ä»¶

```tsx
// src/components/papers/RelatedPapers.tsx

export default function RelatedPapers({ paperId }: { paperId: string }) {
  const [papers, setPapers] = useState<Paper[]>([])
  
  useEffect(() => {
    fetch(`/api/papers/${paperId}/related`)
      .then(res => res.json())
      .then(data => setPapers(data.papers))
  }, [paperId])

  return (
    <div className="mt-8">
      <h2 className="text-xl font-semibold mb-4">ğŸ“š ç›¸å…³è®ºæ–‡</h2>
      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
        {papers.map(paper => (
          <PaperCard key={paper.id} paper={paper} compact />
        ))}
      </div>
    </div>
  )
}
```

### 4.2 é˜…è¯»çŠ¶æ€ç®¡ç†

#### 4.2.1 æ•°æ®åº“è®¾è®¡

```sql
-- ç”¨æˆ·é˜…è¯»çŠ¶æ€è¡¨
CREATE TABLE user_paper_status (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  paper_id UUID REFERENCES papers(id) ON DELETE CASCADE,
  status VARCHAR(20) CHECK (status IN ('want_to_read', 'reading', 'finished')),
  started_at TIMESTAMPTZ,
  finished_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, paper_id)
);
```

#### 4.2.2 é˜…è¯»çŠ¶æ€ç»„ä»¶

```tsx
// src/components/papers/ReadingStatus.tsx

type Status = 'none' | 'want_to_read' | 'reading' | 'finished'

export default function ReadingStatus({ paperId }: { paperId: string }) {
  const [status, setStatus] = useState<Status>('none')
  
  const statusOptions = [
    { value: 'want_to_read', label: 'æƒ³è¯»', icon: BookMarked },
    { value: 'reading', label: 'åœ¨è¯»', icon: BookOpen },
    { value: 'finished', label: 'å·²è¯»', icon: CheckCircle }
  ]

  return (
    <div className="flex gap-2">
      {statusOptions.map(opt => (
        <button
          key={opt.value}
          onClick={() => updateStatus(opt.value)}
          className={cn(
            'px-3 py-1.5 rounded-full text-sm flex items-center gap-1',
            status === opt.value 
              ? 'bg-blue-600 text-white' 
              : 'bg-gray-100 hover:bg-gray-200'
          )}
        >
          <opt.icon size={14} />
          {opt.label}
        </button>
      ))}
    </div>
  )
}
```

### 4.3 å¼•ç”¨ç»Ÿè®¡å±•ç¤º

```tsx
// éœ€è¦é›†æˆç¬¬ä¸‰æ–¹ APIï¼ˆSemantic Scholarã€Crossrefï¼‰

interface CitationStats {
  citationCount: number       // è¢«å¼•æ¬¡æ•°
  referenceCount: number      // å‚è€ƒæ–‡çŒ®æ•°
  influentialCitations: number // é‡è¦å¼•ç”¨æ•°
}

export default function CitationStats({ doi }: { doi: string }) {
  const [stats, setStats] = useState<CitationStats | null>(null)
  
  useEffect(() => {
    // Semantic Scholar API
    fetch(`https://api.semanticscholar.org/graph/v1/paper/DOI:${doi}?fields=citationCount,referenceCount,influentialCitationCount`)
      .then(res => res.json())
      .then(data => setStats({
        citationCount: data.citationCount,
        referenceCount: data.referenceCount,
        influentialCitations: data.influentialCitationCount
      }))
  }, [doi])

  return (
    <div className="flex gap-4 text-sm text-gray-600">
      <span>ğŸ“Š è¢«å¼•: {stats?.citationCount || '-'}</span>
      <span>ğŸ“š å‚è€ƒæ–‡çŒ®: {stats?.referenceCount || '-'}</span>
    </div>
  )
}
```

### 4.4 AI æ‘˜è¦åŠŸèƒ½

```tsx
// éœ€è¦é›†æˆ LLM API

export default function AISummary({ paperId }: { paperId: string }) {
  const [summary, setSummary] = useState<string | null>(null)
  const [loading, setLoading] = useState(false)
  
  const generateSummary = async () => {
    setLoading(true)
    const res = await fetch(`/api/papers/${paperId}/ai-summary`, { method: 'POST' })
    const data = await res.json()
    setSummary(data.summary)
    setLoading(false)
  }

  return (
    <div className="bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg p-4">
      <div className="flex items-center justify-between mb-3">
        <h3 className="font-semibold flex items-center gap-2">
          <Sparkles size={18} className="text-purple-500" />
          AI æ‘˜è¦
        </h3>
        {!summary && (
          <button onClick={generateSummary} disabled={loading}>
            {loading ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆæ‘˜è¦'}
          </button>
        )}
      </div>
      {summary && (
        <p className="text-gray-700 dark:text-gray-300 text-sm leading-relaxed">
          {summary}
        </p>
      )}
    </div>
  )
}
```

---

## äº”ã€æŠ€æœ¯æ³¨æ„äº‹é¡¹

### 5.1 æ€§èƒ½ä¼˜åŒ–

1. **æ‡’åŠ è½½**ï¼šç›¸å…³è®ºæ–‡ã€å¼•ç”¨ç»Ÿè®¡ä½¿ç”¨ `Suspense` + æ‡’åŠ è½½
2. **ç¼“å­˜**ï¼šè¯„åˆ†ç»Ÿè®¡å¯ä½¿ç”¨ SWR/React Query ç¼“å­˜
3. **é¢„è·å–**ï¼šç”¨æˆ·æ‚¬åœæ—¶é¢„è·å–ç›¸å…³è®ºæ–‡æ•°æ®

### 5.2 SEO ä¼˜åŒ–

```tsx
// ä½¿ç”¨ generateMetadata ç”ŸæˆåŠ¨æ€ meta
export async function generateMetadata({ params }): Promise<Metadata> {
  const paper = await getPaper(params.id)
  return {
    title: `${paper.title} | Researchopia`,
    description: paper.abstract?.substring(0, 160),
    openGraph: {
      title: paper.title,
      description: paper.abstract?.substring(0, 160),
      type: 'article',
      authors: paper.authors
    }
  }
}
```

### 5.3 å¯è®¿é—®æ€§

- æ‰€æœ‰æŒ‰é’®æ·»åŠ  `aria-label`
- ä½¿ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾ (`<article>`, `<aside>`, `<nav>`)
- é”®ç›˜å¯¼èˆªæ”¯æŒ

---

## å…­ã€æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] æ¡Œé¢ç«¯å¸ƒå±€æ­£å¸¸ (1440px+)
- [ ] å¹³æ¿å¸ƒå±€æ­£å¸¸ (768px-1024px)
- [ ] ç§»åŠ¨ç«¯å¸ƒå±€æ­£å¸¸ (<768px)
- [ ] æ”¶è—æŒ‰é’®åŠŸèƒ½æ­£å¸¸
- [ ] åˆ†äº«æŒ‰é’®å¤åˆ¶é“¾æ¥æˆåŠŸ
- [ ] æš—è‰²æ¨¡å¼æ ·å¼æ­£ç¡®
- [ ] åŠ è½½çŠ¶æ€éª¨æ¶å±æ˜¾ç¤º
- [ ] é”™è¯¯çŠ¶æ€å¤„ç†æ­£ç¡®
- [ ] æ— éšœç¢æµ‹è¯•é€šè¿‡

---

## ä¸ƒã€å‚è€ƒèµ„æº

- [Semantic Scholar Paper Page](https://www.semanticscholar.org/paper/)
- [Google Scholar](https://scholar.google.com/)
- [ResearchGate Paper Page](https://www.researchgate.net/)
- [arXiv Abstract Page](https://arxiv.org/abs/)
- [è±†ç“£è¯»ä¹¦é¡µé¢](https://book.douban.com/)

---

**æ–‡æ¡£ä½œè€…**: AI Assistant  
**æœ€åæ›´æ–°**: 2025-01-17
